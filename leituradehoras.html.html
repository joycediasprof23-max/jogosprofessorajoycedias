<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Jogo Educacional - Leitura de Horas com Níveis</title>
    <style>
        * {margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat',sans-serif;}
        body {display:flex;align-items:center;justify-content:center;min-height:100vh;background:#5145BA;color:#333;}
        .container {width:90%;max-width:500px;background:#fff;border-radius:10px;box-shadow:0 10px 25px rgba(0,0,0,0.15);overflow:hidden;text-align:center;}
        .header {background:#4CAF50;color:white;padding:15px;font-size:1.5rem;font-weight:bold;}
        .content {padding:20px;}
        .start-screen,.level-screen,.quiz-screen,.result-screen {display:none;flex-direction:column;align-items:center;}
        .start-screen.active,.level-screen.active,.quiz-screen.active,.result-screen.active {display:flex;}
        .start-btn,.level-btn,.next-btn,.try-again-btn,.next-level-btn {margin-top:20px;padding:12px 25px;font-size:1rem;font-weight:600;color:white;background:#5145BA;border:none;border-radius:6px;cursor:pointer;transition:background 0.3s;}
        .start-btn:hover,.level-btn:hover,.next-btn:hover,.try-again-btn:hover,.next-level-btn:hover {background:#403795;}
        .question-text {font-size:1.3rem;margin:15px 0;font-weight:600;}
        .options {width:100%;margin:15px 0;display:flex;flex-wrap:wrap;justify-content:center;gap:12px;}
        .option {display:flex;flex-direction:column;align-items:center;width:120px;padding:8px;border:1px solid #B5ACFF;border-radius:6px;background:#F3F1FF;cursor:pointer;transition:all 0.3s;}
        .option:hover {background:#dad5fd;}
        .option.selected {background:#dfdafd;border-color:#5145BA;}
        .option.correct {background:#D4EDDA;border-color:#B7E1C1;color:#155724;}
        .option.incorrect {background:#F8D7DA;border-color:#F4BEC3;color:#721C24;}
        .option .clock-svg {margin-bottom:8px;}
        .feedback {margin:15px 0;font-weight:600;min-height:24px;}
        .score-display {font-size:1.2rem;margin:10px 0;}
        .progress {width:100%;background:#e0e0e0;border-radius:5px;margin:15px 0;overflow:hidden;height:10px;}
        .progress-bar {height:100%;width:0%;background:#4CAF50;transition:width 0.4s ease;}
        .result-message {font-size:1.2rem;margin:15px 0;font-weight:500;}
        .result-img {width:100px;margin:20px 0;}
        .level-title {font-size:1.25rem;margin-top:0;}
        @media (max-width:600px){
            .header{font-size:1.3rem;}
            .question-text{font-size:1.2rem;}
            .content{padding:15px;}
            .option{width:90px;}
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header">Desafio de Horas com Níveis</div>
    <div class="content">
        <div class="start-screen active">
            <h2>Bem-vindo ao Jogo de Leitura de Horas!</h2>
            <p>Escolha a imagem do relógio que corresponde à pergunta.</p>
            <p><strong>Níveis:</strong> Fácil - Médio - Difícil (20 perguntas cada)</p>
            <button class="start-btn">Começar</button>
        </div>
        <div class="level-screen">
            <h2 class="level-title" id="level-title"></h2>
            <p id="level-description"></p>
            <button class="level-btn">Iniciar Nível</button>
        </div>
        <div class="quiz-screen">
            <div class="progress">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            <div class="score-display">Pontos: <span id="score">0</span> / <span id="total-questions">20</span></div>
            <p class="question-text" id="question-text"></p>
            <div class="options" id="options"></div>
            <p class="feedback" id="feedback"></p>
            <button class="next-btn" id="next-btn">Próxima</button>
        </div>
        <div class="result-screen">
            <img src="https://img.icons8.com/emoji/96/000000/party-popper-emoji.png" class="result-img" alt="Fogos de artifício" />
            <h2>Parabéns!</h2>
            <p class="result-message" id="result-message"></p>
            <div class="score-display">Você acertou <span id="final-score">0</span> de <span id="final-total">20</span> perguntas nesse nível.</div>
            <button class="next-level-btn" style="display:none;">Avançar para o próximo nível</button>
            <button class="try-again-btn">Jogar do início</button>
        </div>
    </div>
</div>
<script>
// Função para gerar SVG de relógio com números de 1 a 12
function gerarClockSVG(hours, minutes) {
    const angleHours = ((hours % 12) + minutes / 60) * 30 - 90;
    const angleMinutes = minutes * 6 - 90;
    const hourX = 50 + 24 * Math.cos(angleHours * Math.PI / 180);
    const hourY = 50 + 24 * Math.sin(angleHours * Math.PI / 180);
    const minX = 50 + 38 * Math.cos(angleMinutes * Math.PI / 180);
    const minY = 50 + 38 * Math.sin(angleMinutes * Math.PI / 180);

    let numbersSVG = '';
    for (let n = 1; n <= 12; n++) {
        const angle = n * 30 - 90;
        const x = 50 + 40 * Math.cos(angle * Math.PI / 180);
        const y = 53 + 40 * Math.sin(angle * Math.PI / 180);
        numbersSVG += `<text x="${x}" y="${y}" text-anchor="middle" font-size="12" fill="#555" font-weight="bold">${n}</text>`;
    }

    return `
    <svg class="clock-svg" width="100" height="100" viewBox="0 0 100 100" aria-label="Relógio mostrando ${hours}:${minutes < 10 ? '0'+minutes : minutes}">
        <circle cx="50" cy="50" r="45" fill="#fff" stroke="#8b89b0" stroke-width="4"/>
        ${numbersSVG}
        <line x1="50" y1="50" x2="${hourX}" y2="${hourY}" stroke="#2c2c76" stroke-width="6" stroke-linecap="round"/>
        <line x1="50" y1="50" x2="${minX}" y2="${minY}" stroke="#F24949" stroke-width="3.5" stroke-linecap="round"/>
        <circle cx="50" cy="50" r="5" fill="#9492ea" />
    </svg>
    `;
}

// Banco de questões dividido em níveis (20 perguntas cada)
const levels = [
    {
        name: "Fácil",
        description: "Relógios com horários inteiros e meia hora.",
        questions: [
            {question:"Qual relógio mostra 1:00?",options:[{hour:1,min:0},{hour:12,min:15},{hour:2,min:30},{hour:3,min:45}],correct:0},
            {question:"Qual relógio mostra 2:00?",options:[{hour:2,min:0},{hour:3,min:15},{hour:4,min:30},{hour:1,min:0}],correct:0},
            {question:"Qual relógio mostra 3:00?",options:[{hour:3,min:0},{hour:2,min:15},{hour:4,min:45},{hour:5,min:30}],correct:0},
            {question:"Qual relógio mostra 4:00?",options:[{hour:4,min:0},{hour:5,min:15},{hour:6,min:30},{hour:7,min:45}],correct:0},
            {question:"Qual relógio mostra 5:00?",options:[{hour:5,min:0},{hour:6,min:15},{hour:7,min:30},{hour:8,min:45}],correct:0},
            {question:"Qual relógio mostra 6:00?",options:[{hour:6,min:0},{hour:7,min:15},{hour:8,min:30},{hour:9,min:45}],correct:0},
            {question:"Qual relógio mostra 7:00?",options:[{hour:7,min:0},{hour:8,min:15},{hour:9,min:30},{hour:10,min:45}],correct:0},
            {question:"Qual relógio mostra 8:00?",options:[{hour:8,min:0},{hour:9,min:15},{hour:10,min:30},{hour:11,min:45}],correct:0},
            {question:"Qual relógio mostra 9:00?",options:[{hour:9,min:0},{hour:10,min:15},{hour:11,min:30},{hour:12,min:45}],correct:0},
            {question:"Qual relógio mostra 10:00?",options:[{hour:10,min:0},{hour:11,min:15},{hour:12,min:30},{hour:1,min:45}],correct:0},
            {question:"Qual relógio mostra 11:00?",options:[{hour:11,min:0},{hour:12,min:15},{hour:1,min:30},{hour:2,min:45}],correct:0},
            {question:"Qual relógio mostra 12:00?",options:[{hour:12,min:0},{hour:1,min:15},{hour:2,min:30},{hour:3,min:45}],correct:0},
            {question:"Qual relógio mostra 1:30?",options:[{hour:1,min:30},{hour:2,min:0},{hour:3,min:15},{hour:4,min:45}],correct:0},
            {question:"Qual relógio mostra 2:30?",options:[{hour:2,min:30},{hour:3,min:0},{hour:4,min:15},{hour:5,min:45}],correct:0},
            {question:"Qual relógio mostra 3:30?",options:[{hour:3,min:30},{hour:4,min:0},{hour:5,min:15},{hour:6,min:45}],correct:0},
            {question:"Qual relógio mostra 4:30?",options:[{hour:4,min:30},{hour:5,min:0},{hour:6,min:15},{hour:7,min:45}],correct:0},
            {question:"Qual relógio mostra 5:30?",options:[{hour:5,min:30},{hour:6,min:0},{hour:7,min:15},{hour:8,min:45}],correct:0},
            {question:"Qual relógio mostra 6:30?",options:[{hour:6,min:30},{hour:7,min:0},{hour:8,min:15},{hour:9,min:45}],correct:0},
            {question:"Qual relógio mostra 7:30?",options:[{hour:7,min:30},{hour:8,min:0},{hour:9,min:15},{hour:10,min:45}],correct:0},
            {question:"Qual relógio mostra 8:30?",options:[{hour:8,min:30},{hour:9,min:0},{hour:10,min:15},{hour:11,min:45}],correct:0}
        ]
    },
    {
        name: "Médio",
        description: "Relógios com horários em 45, 50 e minutos intermediários.",
        questions: [
            {question:"Qual relógio mostra 9:30?",options:[{hour:9,min:30},{hour:10,min:0},{hour:11,min:15},{hour:12,min:45}],correct:0},
            {question:"Qual relógio mostra 10:30?",options:[{hour:10,min:30},{hour:11,min:0},{hour:12,min:15},{hour:1,min:45}],correct:0},
            {question:"Qual relógio mostra 11:30?",options:[{hour:11,min:30},{hour:12,min:0},{hour:1,min:15},{hour:2,min:45}],correct:0},
            {question:"Qual relógio mostra 12:30?",options:[{hour:12,min:30},{hour:1,min:0},{hour:2,min:15},{hour:3,min:45}],correct:0},
            {question:"Qual relógio mostra 1:45?",options:[{hour:1,min:45},{hour:2,min:0},{hour:3,min:15},{hour:4,min:30}],correct:0},
            {question:"Qual relógio mostra 2:45?",options:[{hour:2,min:45},{hour:3,min:0},{hour:4,min:15},{hour:5,min:30}],correct:0},
            {question:"Qual relógio mostra 3:45?",options:[{hour:3,min:45},{hour:4,min:0},{hour:5,min:15},{hour:6,min:30}],correct:0},
            {question:"Qual relógio mostra 4:45?",options:[{hour:4,min:45},{hour:5,min:0},{hour:6,min:15},{hour:7,min:30}],correct:0},
            {question:"Qual relógio mostra 5:45?",options:[{hour:5,min:45},{hour:6,min:0},{hour:7,min:15},{hour:8,min:30}],correct:0},
            {question:"Qual relógio mostra 6:45?",options:[{hour:6,min:45},{hour:7,min:0},{hour:8,min:15},{hour:9,min:30}],correct:0},
            {question:"Qual relógio mostra 7:45?",options:[{hour:7,min:45},{hour:8,min:0},{hour:9,min:15},{hour:10,min:30}],correct:0},
            {question:"Qual relógio mostra 8:45?",options:[{hour:8,min:45},{hour:9,min:0},{hour:10,min:15},{hour:11,min:30}],correct:0},
            {question:"Qual relógio mostra 9:45?",options:[{hour:9,min:45},{hour:10,min:0},{hour:11,min:15},{hour:12,min:30}],correct:0},
            {question:"Qual relógio mostra 10:45?",options:[{hour:10,min:45},{hour:11,min:0},{hour:12,min:15},{hour:1,min:30}],correct:0},
            {question:"Qual relógio mostra 11:45?",options:[{hour:11,min:45},{hour:12,min:0},{hour:1,min:15},{hour:2,min:30}],correct:0},
            {question:"Qual relógio mostra 12:45?",options:[{hour:12,min:45},{hour:1,min:0},{hour:2,min:15},{hour:3,min:30}],correct:0},
            {question:"Qual relógio mostra 1:20?",options:[{hour:1,min:20},{hour:2,min:0},{hour:3,min:15},{hour:4,min:30}],correct:0},
            {question:"Qual relógio mostra 2:25?",options:[{hour:2,min:25},{hour:3,min:0},{hour:4,min:15},{hour:5,min:30}],correct:0},
            {question:"Qual relógio mostra 3:50?",options:[{hour:3,min:50},{hour:4,min:0},{hour:5,min:15},{hour:6,min:30}],correct:0},
            {question:"Qual relógio mostra 4:55?",options:[{hour:4,min:55},{hour:5,min:0},{hour:6,min:15},{hour:7,min:30}],correct:0}
        ]
    },
    {
        name: "Difícil",
        description: "Relógios com minutos quebrados e horários complexos.",
        questions: [
            {question:"Qual relógio mostra 5:35?",options:[{hour:5,min:35},{hour:6,min:0},{hour:7,min:15},{hour:8,min:30}],correct:0},
            {question:"Qual relógio mostra 6:40?",options:[{hour:6,min:40},{hour:7,min:0},{hour:8,min:15},{hour:9,min:30}],correct:0},
            {question:"Qual relógio mostra 7:50?",options:[{hour:7,min:50},{hour:8,min:0},{hour:9,min:15},{hour:10,min:30}],correct:0},
            {question:"Qual relógio mostra 8:55?",options:[{hour:8,min:55},{hour:9,min:0},{hour:10,min:15},{hour:11,min:30}],correct:0},
            {question:"Qual relógio mostra 9:05?",options:[{hour:9,min:5},{hour:10,min:0},{hour:11,min:15},{hour:12,min:30}],correct:0},
            {question:"Qual relógio mostra 10:07?",options:[{hour:10,min:7},{hour:11,min:0},{hour:12,min:15},{hour:1,min:30}],correct:0},
            {question:"Qual relógio mostra 11:12?",options:[{hour:11,min:12},{hour:12,min:0},{hour:1,min:15},{hour:2,min:30}],correct:0},
            {question:"Qual relógio mostra 12:15?",options:[{hour:12,min:15},{hour:1,min:0},{hour:2,min:15},{hour:3,min:30}],correct:0},
            {question:"Qual relógio mostra 1:18?",options:[{hour:1,min:18},{hour:2,min:0},{hour:3,min:15},{hour:4,min:30}],correct:0},
            {question:"Qual relógio mostra 2:22?",options:[{hour:2,min:22},{hour:3,min:0},{hour:4,min:15},{hour:5,min:30}],correct:0},
            {question:"Qual relógio mostra 3:52?",options:[{hour:3,min:52},{hour:4,min:0},{hour:5,min:15},{hour:6,min:30}],correct:0},
            {question:"Qual relógio mostra 4:58?",options:[{hour:4,min:58},{hour:5,min:0},{hour:6,min:15},{hour:7,min:30}],correct:0},
            {question:"Qual relógio mostra 5:03?",options:[{hour:5,min:3},{hour:6,min:0},{hour:7,min:15},{hour:8,min:30}],correct:0},
            {question:"Qual relógio mostra 6:08?",options:[{hour:6,min:8},{hour:7,min:0},{hour:8,min:15},{hour:9,min:30}],correct:0},
            {question:"Qual relógio mostra 7:20?",options:[{hour:7,min:20},{hour:8,min:0},{hour:9,min:15},{hour:10,min:30}],correct:0},
            {question:"Qual relógio mostra 8:23?",options:[{hour:8,min:23},{hour:9,min:0},{hour:10,min:15},{hour:11,min:30}],correct:0},
            {question:"Qual relógio mostra 9:40?",options:[{hour:9,min:40},{hour:10,min:0},{hour:11,min:15},{hour:12,min:30}],correct:0},
            {question:"Qual relógio mostra 10:44?",options:[{hour:10,min:44},{hour:11,min:0},{hour:12,min:15},{hour:1,min:30}],correct:0},
            {question:"Qual relógio mostra 11:39?",options:[{hour:11,min:39},{hour:12,min:0},{hour:1,min:15},{hour:2,min:30}],correct:0},
            {question:"Qual relógio mostra 12:42?",options:[{hour:12,min:42},{hour:1,min:0},{hour:2,min:15},{hour:3,min:30}],correct:0}
        ]
    }
];

const startScreen = document.querySelector('.start-screen');
const levelScreen = document.querySelector('.level-screen');
const quizScreen = document.querySelector('.quiz-screen');
const resultScreen = document.querySelector('.result-screen');
const startBtn = document.querySelector('.start-btn');
const levelBtn = document.querySelector('.level-btn');
const nextBtn = document.getElementById('next-btn');
const nextLevelBtn = document.querySelector('.next-level-btn');
const questionText = document.getElementById('question-text');
const optionsContainer = document.getElementById('options');
const feedback = document.getElementById('feedback');
const scoreDisplay = document.getElementById('score');
const totalQuestionsDisplay = document.getElementById('total-questions');
const finalScoreDisplay = document.getElementById('final-score');
const finalTotalDisplay = document.getElementById('final-total');
const resultMessage = document.getElementById('result-message');
const tryAgainBtn = document.querySelector('.try-again-btn');
const progressBar = document.getElementById('progress-bar');
const levelTitle = document.getElementById('level-title');
const levelDescription = document.getElementById('level-description');

// Estados do jogo
let nivelAtual = 0;
let questaoAtual = 0;
let pontuacao = 0;
let respondeu = false;
let perguntasNivel = [];

function embaralharArray(array) {
    // Algoritmo Fisher-Yates
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array;
}

// Início do jogo
startBtn.addEventListener('click', () => {
    startScreen.classList.remove('active');
    nivelAtual = 0;
    mostrarTelaNivel();
});

function mostrarTelaNivel() {
    levelTitle.textContent = `Nível ${levels[nivelAtual].name}`;
    levelDescription.textContent = levels[nivelAtual].description;
    levelScreen.classList.add('active');
    quizScreen.classList.remove('active');
    resultScreen.classList.remove('active');
}

levelBtn.addEventListener('click', () => {
    levelScreen.classList.remove('active');
    pontuacao = 0;
    questaoAtual = 0;
    // criar array de perguntas embaralhadas de acordo com nível
    perguntasNivel = levels[nivelAtual].questions.map(q => ({
        question: q.question,
        // embaralha opções de cada pergunta
        embaralhado: (() => {
            const arr = q.options.map((op, idx) => ({data: op, certo: idx === q.correct}));
            return embaralharArray(arr);
        })()
    }));
    quizScreen.classList.add('active');
    totalQuestionsDisplay.textContent = perguntasNivel.length;
    scoreDisplay.textContent = pontuacao;
    mostrarQuestao();
});

// Exibir questão embaralhada
function mostrarQuestao() {
    resetState();
    const pergunta = perguntasNivel[questaoAtual];
    questionText.textContent = pergunta.question;
    pergunta.embaralhado.forEach((alternativa, idx) => {
        const btn = document.createElement('button');
        btn.className = 'option';
        btn.innerHTML = gerarClockSVG(alternativa.data.hour, alternativa.data.min);
        btn.addEventListener('click', () => selecionarOpcao(btn, alternativa.certo, idx));
        optionsContainer.appendChild(btn);
    });
    updateProgress();
}

// Reset
function resetState() {
    feedback.textContent = '';
    nextBtn.style.display = 'none';
    respondeu = false;
    optionsContainer.innerHTML = '';
}

// Seleciona alternativa
function selecionarOpcao(btn, correta, idx) {
    if (respondeu) return;
    respondeu = true;
    const opcoes = document.querySelectorAll('.option');
    opcoes.forEach(opt => opt.style.pointerEvents = 'none');
    btn.classList.add('selected');
    if (correta) {
        btn.classList.add('correct');
        feedback.textContent = 'Correto! Parabéns!';
        feedback.style.color = '#155724';
        pontuacao++;
        scoreDisplay.textContent = pontuacao;
    } else {
        btn.classList.add('incorrect');
        feedback.textContent = 'Errado! Observe corretamente o relógio.';
        feedback.style.color = '#721C24';
        const idxCerto = perguntaCorreta();
        opcoes[idxCerto].classList.add('correct');
    }
    nextBtn.style.display = 'block';
}

// Localiza índice da resposta correta na questão embaralhada
function perguntaCorreta() {
    const pergunta = perguntasNivel[questaoAtual];
    return pergunta.embaralhado.findIndex(x => x.certo);
}

// Barra de progresso
function updateProgress() {
    const progresso = (questaoAtual / perguntasNivel.length) * 100;
    progressBar.style.width = progresso + '%';
}

// Próxima questão ou tela de resultado
nextBtn.addEventListener('click', () => {
    questaoAtual++;
    if (questaoAtual < perguntasNivel.length) {
        mostrarQuestao();
    } else {
        mostrarTelaResultado();
    }
});

// Tela resultado
function mostrarTelaResultado() {
    quizScreen.classList.remove('active');
    resultScreen.classList.add('active');
    finalScoreDisplay.textContent = pontuacao;
    finalTotalDisplay.textContent = perguntasNivel.length;

    const percent = (pontuacao / perguntasNivel.length) * 100;
    let mensagem;
    if (percent >= 80) mensagem = 'Excelente! Você é um mestre da leitura de horas!';
    else if (percent >= 50) mensagem = 'Bom trabalho! Continue praticando!';
    else mensagem = 'Continue estudando! Você vai melhorar!';
    resultMessage.textContent = mensagem;

    // Botão de avançar para próximo nível
    if (nivelAtual < levels.length-1) {
        nextLevelBtn.style.display = 'inline-block';
    } else {
        nextLevelBtn.style.display = 'none';
    }
}

// Avançar nível
nextLevelBtn.addEventListener('click', () => {
    nivelAtual++;
    pontuacao = 0;
    questaoAtual = 0;
    scoreDisplay.textContent = pontuacao;
    mostrarTelaNivel();
});

// Tentar novamente (volta ao início)
tryAgainBtn.addEventListener('click', () => {
    nivelAtual = 0;
    pontuacao = 0;
    questaoAtual = 0;
    resultScreen.classList.remove('active');
    startScreen.classList.add('active');
    scoreDisplay.textContent = pontuacao;
});

</script>
</body>
</html>


